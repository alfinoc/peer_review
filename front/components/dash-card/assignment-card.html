<link rel="import" href="/components/standard/core-icon/core-icon.html">
<link rel="import" href="/components/standard/paper-fab/paper-fab.html">
<link rel="import" href="/components/standard/core-collapse/core-collapse.html">
<link rel="import" href="/components/standard/paper-radio-group/paper-radio-group.html">
<link rel="import" href="/components/standard/paper-icon-button/paper-icon-button.html">

<link rel="import" href="/components/standard/paper-icon-button/paper-icon-button.html">

<link rel="import" href="/components/standard/core-icons/editor-icons.html">

<polymer-element name="assignment-card">
   <template>
      <link rel="stylesheet" type="text/css" href="dash-card.css">
      <h1 layout horizontal>
         <span flex self-center>Assignments</span>
         <paper-fab class="headerbutton" icon="add" mini></paper-fab>
      </h1>
      <div class="content">
         <ul class="toplevel">
            <template repeat="{{ a in assignments }}">
               <li>
                  <div layout horizontal>
                     <paper-icon-button id="edit" icon="editor:mode-edit"></paper-icon-button>
                     <div class="clickable" on-click="{{ toggleCollapseSection }}" flex self-center>
                        {{ a.name }}
                     </div>
                     <paper-radio-group selected="off" class="dark">
                        <paper-radio-button name="off"></paper-radio-button>
                        <paper-radio-button name="respond"></paper-radio-button>
                        <paper-radio-button name="feedback"></paper-radio-button>
                     </paper-radio-group>
                  </div>
                  <core-collapse opened>
                     <ol>
                        <template repeat="{{ q in a.questions }}">
                           <li>{{ q }}</li>
                        </template>
                     </ol>
                  </core-collapse>
               </li>
            </template>
         </ul>
      </div>
   </template>
      <script>

Polymer('assignment-card', {
   publish: {
      'assignments': []
   },

   created: function() {
      this.assignments = [];
   },

   toggleCollapseSection: function(evt) {
      var ancestor = evt.target.parentElement.parentElement;
      var collapse = ancestor.querySelector('core-collapse');
      var editButton = ancestor.querySelector('#edit');
      collapse.toggle();
      if (collapse.opened)
         editButton.classList.remove('hide');
      else
         editButton.classList.add('hide');
   }
});

   </script>
</polymer-element>